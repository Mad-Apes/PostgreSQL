# 创建索引的目的
```
	没有创建索引之前， 查询语句需要扫描整张表，一行一行的去匹配。如果数据量很大的时候，效率很低。创建索引，可以用一种有效的方式来定位匹配行。
	例如，它可能仅仅遍历一个搜索树的几层而已。
```

# 知识点
```
	索引被创建后，不需要手动维护索引，系统在表更新时自动更新索引。系统会选择在使用索引比顺序扫描表效率高时使用索引。
	注意应该定期使用 analyze 命令来更新统计信息，使查询规划器能够做出正确的选择。

	索引也可以使用在带查询条件的 update 和 delete 上，此外索引也可以在连接查询中使用，一个定义在连接查询条件上的索引可以显著的提高查询速度。

	在一个大表上创建索引会消耗很长的时间，默认情况下，PostgreSQL 允许索引在创建的同时可以并行的进行读操作(select),但是写操作(update, insert, delete)会被阻塞
	直到索引创建完成，

	索引创建后，系统必须保持索引与表的同步，这必然增加了表的负担，因此创建索引应该注意，那些很少或者从来不在查询中出现的字段不要创建索引或者很少使用索引应该该删除掉。
```
# 索引的类型

# 并发构建索引

# TODO
	索引什么时候会被用到？什么情况下不会被用到？
	如何找出一个索引是否被使用以及规划器在何时以及为什么会选择不使用索引?
	再生产环境中，怎么能在索引创建的同时进行写操作？参照并发构建索引?
	创建唯一索引，同时附加字段? PG10支持


# 不阻塞创建索引
```
通常在postgresql创建普通索引如下

create index idx_table_name_x1 on table_name(col_name);

执行后在创建索引期间会阻塞 dml，如果是在比较繁忙的系统或者大表上执行该语句的话，估计很快就会有人问候你了。

所以应该使用 concurrently 参数：

create index concurrently idx_table_name_x1 on table_name(col_name);
```


https://blog.csdn.net/jubaoquan/article/details/78850899
