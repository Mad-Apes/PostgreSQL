# 主库 postgresql.conf
```
    wal_level = hot_standby   # 这个是设置主为wal的主机
    max_wal_senders = 5       # 这个设置了可以最多有几个流复制连接，差不多有几个从，就设置几个
    wal_keep_segments = 128   # 设置流复制保留的最多的xlog数目
    wal_sender_timeout = 60s  # 设置流复制主机发送数据的超时时间
    max_connections = 100     # 这个设置要注意下，从库的max_connections必须要大于主库的
```
# 主库 pg_hba.conf 考虑到主备切换所以主备数据库的 pg_hba.conf 配置完全一样
```
    # replicat on privilege.
    host replcation repuser 192.168.28.74/32 md5
    host replcation repuser 192.168.28.75/32 md5
```

# 登录数据库为流复制添加专门的用户
```
    CREATE USER repuser REPLICATION LOGIN PASSWORD '123456';
```
